책 위주로 했었음.

-	지우는 동작에 대해...
	-	RESTRICT : 삭제하다가 중간에 그만
	-	NO ACTION : 삭제하다가 중간에 되돌리기? ← 기본
	-	→ 많은 DB 모델러에서 구분하지 않음
	-	none : 암것도 안 함

---

이미지 자료의 저작권은 출판사 및 저자, 수정을 가하셨을지도 모르는 교수님 등 적법한 자에게 있음.

데이터베이스 설계와 구축 개정판, 이춘식, 한빛미디어

---

6장. 모델 검토
==============

② 속성 검토
-----------

-	속성
	1.	정규화 (PK 빼고 전체 ERD에 안 중복)
	2.	반정규화 (성능 고려)
		-	파생속성 : 속성, 합계, 수량 등
		-	기타 시스템 관리 속성

### 살펴볼 사항들

-	1) 반정규화된 속성은 식별되는가
-	2) 반정규화는 시스템의 복잡도와 성능을 고려하여 적절하게 이루어졌는가
-	3) 명칭이 같은 속성의 타입과 크기는 동일한가
-	4) 내부적인 속성을 가지고 있는 속성은 없는가
-	5) 병합되어야 할 속성은 없는가
-	6) 전후 레코드간 영향을 미칠 수 있는 속성은 없는가
-	7) 감사, 통계 등을 고려하여 속성이 정의되었는가

### 정규화와 반정규화

-	정규화의 기본
	-	한 가지 사실은 한 곳에만 저장한다 (정규화로부터 시작하라)
	-	끝 = Boyce-codd normal form
-	역 / 반정규화
	-	정규화 후 다시 합치는 것
	-	꼭 쪼갰던 걸 다시 합치는 건 아님.
		-	자주 쓰이는걸 역정규화의 대상으로

### 1) 반정규화된 속성 식별가능?

-	무엇이 반정규화 속성인지 알아볼 수 있어야
	-	대규모 / 인수인계 등...

#### 주료 오류 유형 사례

##### (1) 반정규화 속성 : 실제로는 의미가 다르지만 이름이 같은 경우

![](dbmake09-01.jpeg)

-	Join 등의 목적으로 관계 엔티티에 칼럼을 역정규화 (복사) 해놨더니...
	-	전화번호(고객), 전화번호(사원정보), 전화번호(????)

### 2) 반정규화 적절? (시스템 복잡도, 성능)

-	반정규화 : 속도 목적, 여기저기에 칼럼 복붙
-	단점
	-	수정시 부하 발생 (여기저기도 다 갱신해야)
	-	잘못했다 무결성 깨짐 (실수로 수정 프로세스 빼먹으면)

#### 주요 오류 유형 사례

##### (1) 시스템 특성에 따르지 않은 과도한 반정규화

![](dbmake09-02.png)

-	이력 엔티티타입 : 대체로 정보의 고정 시점이 있다 → 반정규화 GOOD
-	But 여기서 : 고정되는 부분이 (확정 이력이) 동일 → 부하가 배로 발생
	-	최초 하나만 역정규화하자....

##### (2) 역정규화 안해서 시스템 성능 ↓

-	계열사별 고객 ← + 행정동 (고객정보 에서)
-	계열사별 고객을 행정동 기준으로 검색하는데, 계열사별 고객이 엄청 많다면.

> 고객 정보 수는 천만건이 넘음, 행정동은 인덱스. 특정 계열사의 행정동별 우수 고객을 검색할때... 고객정보(행정동) 인덱스 → 고객번호(고객) → 고객번호(계열사별 고객) → 우수고객여부(계열사별 고객) ... 4차씩이나!

### 3) 이름같은 속성 → 타입과 크기 동일?

-	문제점
	-	자료의 무결성이 깨질 수 있음
	-	SQL 조인 시 연결고리 → 검색 조건에서 있는데 못찾을수도 있음

#### 주요 오류 유형 사례

##### (1) 크기의 불일치

-	사원정보의 사원명 = 10byte / 급여이력의 사원명 = 8byte
	-	사원정보 (읽음) → 급여이력 (씀) : 손실가능

##### (2) 타입의 불일치

![](dbmake09-03.png)

### 4) 내부적인 속성을 갖는 속성

-	두 가지
	-	초기부터 내부적인 속성
		-	전화번호 (지역번호 + 국번호 + 일련번호)
		-	성명 (성 + 이름)
		-	주민번호 (생년월일 + 일련번호)
	-	필요에 따라 조합 (시스템, 업무상)
		-	문서번호 (문서발생부서 + 문서유형 + 날짜 + 일련번호)

#### 주요 오류 유형 사례

##### (1) 병합된 속성만 관리

![](dbmake09-04.png)

-	내부 속성도 중요한 경우.

### 5) 병합되어야 할 속성? : 과도하게 쪼갠 경우

#### 주요 오류 유형 사례

##### (1) 범위조회가 많음 : 날짜 등

![](dbmake09-05.png)

-	범위조회 : 값 자체가 범위가 되게 합친다 (나누면 더 힘듦)

③ 관계 검토
-----------

④ 도메인 검토
-------------
