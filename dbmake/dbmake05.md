와 5강이다
==========

1부 논리설계 → 2장. 데이터 분석 및 모델링
=========================================

### 데이터 모델링 시 유의사항

-	오직 한 가지 절대적인 방법이 존재하지는 않음
	-	→ 결과가 한가지가 아님
-	실제 업무담당자와 공감대를!
	-	→ 업무담당자를 전문가로 봐야! → 귀를 기울여라!
	-	데이터 모델러가 리드하면 곤란 (모델러 맘대로 만들어질 수 있음)
-	데이터 분석단계에서 DB를 정의하고픈 유혹에서 벗어나야!
	-	→ 업무 자체의 분석에 중점을 둘 것
	-	→ 업무분석하면서 머릿속에서 for 루프 돌리고 있으세요? (바람직하지 않음)
	-	→ 모델링에만 집중하자!
-	프로젝트와 업무 사항에 부합하도록 모델링을 진행
	-	→ 더 만들지 마라 (혹은 추가로 계약) → 나중에 책임질래?

### 좋은 데이터 모델의 특징

-	해당 업무의 현재 모습 뿐만 아니라 → **계획, 정책, 전략**을 포함해야
	-	모델링은 카디널리티를 파악하는 것
	-	나중에 수정 가능하게, 구현 안 할 것이라도 향후 발전시킬 수 있게
-	명명법, 도메인 등 → 일관적으로, 정해진 규칙!
	-	도메인 정리의 중요성
		-	부서 → 컴공, 뭐시기, ...
		-	부서이름의 varchar2 → 40byte를 똑같이, 모든 테이블에 정의 가능
		-	join 같은 거 할 때도 → 형태가 같지 않으면 비교연산을 할 수가 없어,,,
-	업무 전문가가 참여 → 실무 내용이 충분히 포함되어야!
	-	데이터 모델러는 있는데 책임자가 없어요!!!!!! 왜!!!!!!!!! 모델러는 술 쳐먹으러 왔나요!!!!!!!!!!!!!
	-	→ 사업 개판됨
	-	소통이 잘 되야 뭘 만들어야 할지 알죠...
-	물리 설계로의 전환이 효율적으로 되도록
	-	→ 툴이 해줌 (웃음)
	-	DDL이 나오는걸 바로 쓰는 게 아니라 ... 그걸 또 보고 ... 하나의 블록에 데이터를 얼마나 채울것인가 (fill factor) 등...
	-	어떤 인덱스를 설정할 것인가
-	엔티티타입, 속성, 관계 등에 대한 업무차원에서의 (왜 있어야 하는지 / 객관적 증거)
-	확장 수용가능
	-	대충 만들고 조금씩 추가 → 나중에 DB가 ~~떡방아를 찍게 됨~~ 떡이 됨
	-	→ 역공학된게 ER 모델링하고 안 맞는다던가 (미친) → ER 모델러가 다른 부서로 갔거나 퇴사했다면!

① 엔티티타입 정의
-----------------

**엔티티타입 정의** → 관계 정의 → 식별자 정의 → 세부사항 정의 → 통합화 → 데이터 모델 검증

### 엔티티타입 선정 대상

> 엔티티타입을 찾아내는 작업은 마치 *검사가 범죄자의 증거 자료를 찾듯이* 모든 방법이 동원된다.

-	아직은 엔티티타입에만 집중
-	뽑아내는 곳
	-	장표 (보고서)
		-	엑셀 파일, 테이블, 화면보기 등
		-	→ 장표에 유혹 / 현혹되세요? (ㅋㅋㅋㅋ)
		-	→ 한 순간의 스냅샷
			-	문제 0 : (놓침...)
			-	문제 1 : 데이터만 보인다 → 엔티티타입이 가져야할 특징이 안 보일수도
			-	문제 2 : 화면은 이미 여러 테이블을 join 한 것임 → 찾고자하는 엔티티 타입은 아닐것임!
		-	현혹되지 말 것
	-	업무 기술서
	-	인터뷰
	-	DFD
		-	DFD를 통해 업무 분석을 진행하였다면 DFD의 Data Store 를 활용한다
	-	구 시스템
		-	현혹되지 말 것 ②
		-	참고
	-	현장조사
		-	업무 기술서에 없던게 나온다!
	-	업무 개선
		-	개선할 수 있는지 생각해보기

### 엔티티타입 선정 절차

-	절차
	1.	여러 자료 등에서 명사를 구분 (동사와 명사를)
		-	교수, 학생 vs 지도 (동사)
	2.	제거 : 불분명
	3.	제거 : 엔티티타입의 특성, 속성값인 것
	4.	제거 : 중복되는 명사
	5.	뭐 빠진거 없어?
-	기준
	-	업무에서 관리할 필요?
	-	자신만의 속성?
	-	스스로 혹은 다른걸로 지속적 생성됨?

### 예

> 인터넷 경매를 하는 IAutionCo 라는 회사는 경매할 물품에 대한 내용을 온라인으로 접수받고, 각 물품이 팔릴 수 있는 날짜를 정하여 (이 날짜를 경매 공고일이라고 함) 인터넷에 경매를 공고한다. 경매 공고일에는 역시 온라인을 통해 입찰인이 입찰된 물품을 매수 신청하고 매수 신청한 입찰인 중 최고가를 신청한 매수 신청인에게 물품이 낙찰된다. 물품 낙찰일로부터 1주일 이내에 낙찰대금을 은행계좌나 카드, 또는 직접 IAutionCo에 납부하지 않으면 낙찰은 자동으로 취소되고 차순위 금액을 신청한 매수 신청인에게 물품이 낙찰된다. 낙찰인은 1주일 이내에 대금을 납부하면 경매가 성사되었다고 하고, 매수 신청인에게 낙찰대금을 입금하여 경매 절차가 완료된다. 경매가 성사되는 경우 물품 가격의 2%를 IAuctionCo에 수수료로 납부해야 한다. 각 경매일에 경매가 진행된 결과는 자세하게 알 수 있어야 한다.

-	DB 진흥원? 에서 DB 모델링 경진대회에서 이런 시나리오가 아주 길...게...

#### 1 - 엔티티타입 도출 방법에 의해 엔티티타입을 선정한다

1.	시나리오에서 명사 구분
2.	개념 불분명, 광범위 제외
	-	인터넷 경매, IAuctionCo, 회사, 내용, 인터넷
3.	엔티티타입의 특성 / 속성 제거
	-	날짜, 경매 공고일, 최고가, 낙찰일, 낙찰대금, 은행계좌, 카드, 직접납부, 차순위금액, 물품가격, 2%, 수수료, 경매일
	-	직접납부는 좀 *까리까리*
4.	포괄적인 업무 프로세스 명사 제거
	-	온라인, 자동, 취소, 대금납부, 경매성사, 입금, 결과
5.	중복명사 제거
	-	입찰인 = 매수신청인, 매수신청 = 신청 (둘 중 하나씩)
6.	누락된 엔티티타입정보 유추
	-	경매물품 → 추가

---

-	관계 정의서 작성 → 꼼꼼하게 적는다 (아래에는 하나만 적었어요... 힘들어...)

| 엔티티 타입명 | 엔티티타입 설명 | **동의어 / 유의어** | 엔티티타입 구분 | 관련 속성 | 비고                           |
|---------------|-----------------|---------------------|-----------------|-----------|--------------------------------|
| 물품          | 설명(생략)      | 제품목록            | \-              | \-        | 장표 중 주문서의 내용이 포함됨 |

-	이런걸 잘 해야 함. 정말 안 하려고 하지만...

### 엔티티타입 확정

-	도출된 엔티티타입들의 적절성을 **업무담당자와 함께 검증**
	-	→ 현업 담당자들을 미리미리 깨울 수 있다!
	-	너무 늦게 깨우치면 나중에 뭐라뭐라 추가해주세요
	-	기업의 충성심 → 현업 담당자가 결국 나중에는 오버를... ㅋㅋㅋㅋ... 자기가 회사 운영하는듯이...
	-	→ 첨부터 얘기하지!
	-	→ 이야기할 기회를 줘야
-	도장이 안 찍혀있는만큼 돈이 덜 나감 : 나중에갈수록 검수를 꼼꼼하게 됨! ...
-	현장 사람들과 사이가 좋아야 함.
